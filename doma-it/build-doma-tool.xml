<project name="doma-it-copy" default="jar" basedir=".">

	<property name="build" value="target/build"/>
	<property name="src" value="../doma-tool/src/main/java"/>
	<property name="resources" value="../doma-tool/src/main/resources"/>

	<path id="classpath">
		<pathelement location="lib/doma-SNAPSHOT.jar"/>
		<fileset dir="../doma-tool/lib"/>
	</path>

	<target name="jar" depends="clean,compile,copy">
		<jar jarfile="lib/doma-tool-SNAPSHOT.jar" basedir="target/build" />
		<jar jarfile="libsrc/doma-tool-SNAPSHOT-sources.jar" basedir="../doma-tool/src/main/java" />
	</target>

	<target name="clean">
		<delete dir="target" failonerror="false"/>
		<mkdir dir="target"/>
		<mkdir dir="${build}"/>
	</target>

	<target name="compile">
		<javac fork="yes" srcdir="${src}" compiler="javac1.6"
			classpathref="classpath" destdir="${build}" debug="on" encoding="UTF-8" >
		</javac>
	</target>

	<target name="copy" depends="compile">
		<copy todir="${build}" filtering="true">
			<fileset dir="${resources}">
				<include name="**/*.properties" />
				<include name="**/*.xml" />
				<include name="**/*.dtd" />
				<include name="META-INF/**" />
			</fileset>
		</copy>
	</target>
</project>